(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),a=n(4),r=n.n(a),s=(n(14),n(1)),c=n(2),d=n(7),l=n(5),u=n(8),g=n(6),p=n.n(g),f=function(){return Math.random().toString(36).substring(2,4)},m="data-result",h={predictableContainer:"".concat(f(),"-").concat(f()),result:"".concat(f(),"-").concat(f())},v=function(t){return t.innerHTML=""},b={getInput:function(t){return t},createResultsList:function(t){var e=t.container,n=t.position,i=t.element,o=t.destination,a=document.createElement(i);return a.setAttribute("id",h.predictableContainer),e&&e(a),o.insertAdjacentElement(n,a),a},insertSuggestion:function(t,e,n){if(e.length>0){var i=document.createElement(n.element),o=e[0].value;i.setAttribute(m,o),i.setAttribute("id",h.result),i.setAttribute("class","predictable__suggestion"),i.setAttribute("style","white-space: nowrap"),n.content?n.content(e[0],i):i.innerHTML=e[0].match||e[0],t.appendChild(i)}},clearResults:v,getSelection:function(t,e,n,i,o){var a=document.getElementById(h.result),r=document.getElementById(t);a&&document.addEventListener("keydown",function t(s){"Tab"===s.key&&r.firstChild&&""!==r.firstChild.firstChild.data&&(i({event:s,context:e.innerHTML,matches:o.matches,results:o.list.map(function(t){return t.value}),selection:o.list.find(function(t){var e=t.value;return e===a.getAttribute(m)})}),v(n),document.removeEventListener("keyup",t))})}},C=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};C.prototype=window.Event.prototype;var y={CustomEventWrapper:"function"===typeof window.CustomEvent&&window.CustomEvent||C,initElementClosestPolyfill:function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})}},w=function(){function t(e){var n=this;Object(s.a)(this,t),this.lookupSuggestions=function(t,e){if(e.startsWith(t))return e},this.renderSuggestions=function(){n.editor.addEventListener("keyup",function(t){n.suggestionsData=n.data.source(),function(t){var e=n.editor.textContent,i=n.queryValue=n.context&&n.context.getData?n.context.getData(e):e,o=i?i.length>n.sensitivity&&i.replace(/ /g,"").length:"",a=function(t,o){n.editor.dispatchEvent(new y.CustomEventWrapper("Predictable",{bubbles:!0,detail:{event:t,input:e,context:i,matches:o?o.matches:null,results:o?o.list:null},cancelable:!0}))},r=n.onTabPress,s=n.predictableContainer.view;b.clearResults(s);o?n.getMatchingSuggestion(n.suggestionsData).then(function(e){a(t,e),r&&b.getSelection(n.predictableContainerId,n.editor,s,r,e)}):(a(t),b.clearResults(n.predictableContainer.view))}(t)})},this.editorId=e.editorId,this.predictableContainerId=e.predictableContainerId,this.editor=e.editor,this.active=!1,this.data={source:function(){return"function"===typeof e.data.source?e.data.source():e.data.source},cache:!1},this.context=e.context,this.sensitivity=e.sensitivity||3,this.predictableContainer={view:b.createResultsList({container:!(!e.predictableContainer||!e.predictableContainer.container)&&e.predictableContainer.container,destination:e.editor,position:"afterend",element:"div"})},this.suggestionText={content:!(!e.suggestionText||!e.suggestionText.content)&&e.suggestionText.content,element:"span"},this.onTabPress=e.onTabPress,this.suggestionsData=e.suggestionsData,this._initPredictable()}return Object(c.a)(t,[{key:"_initPredictable",value:function(){this.suggestionsData=this.data.source(),this.renderSuggestions(),y.initElementClosestPolyfill()}},{key:"getMatchingSuggestion",value:function(t){var e=this;return new Promise(function(n){var i=[];t.filter(function(t,n){var o=e.lookupSuggestions(e.queryValue,t);return o&&i.push({index:n,match:o,value:t}),i});var o=i.slice(0,1);return b.insertSuggestion(e.predictableContainer.view,i,e.suggestionText),n({matches:i.length,list:o})})}}]),t}(),E=["safe and sound","patients leg was broken and needed surgery"],x=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(d.a)(this,Object(l.a)(e).call(this,t))).editorContainer=o.a.createRef(),n.preventTabDefault=function(t){var e=t.key;e&&"Tab"===e&&t.preventDefault()},n.getLastWordCoordinates=function(){var t=window.getSelection(),e=t.anchorNode,i=t.getRangeAt(0),o=n.getLastWordOffset(n.getLastWord()),a=document.createRange();a.setStart(e,o),a.setEnd(e,o),a.collapse(!1);var r=document.createElement("span");r.id=f(),r.appendChild(document.createTextNode("")),a.insertNode(r),t.removeAllRanges(),t.addRange(i);var s=r.getBoundingClientRect(),c=s.top,d=s.left,l=r.parentElement;return l.normalize(),l.removeChild(r),{top:c,left:d}},n.getLastWord=function(){var t=window.getSelection().anchorNode;if(t&&t.data)return t.data},n.getLastWordOffset=function(t){if(t){var e=t.split(" "),i=n.getLastWord(),o=e[e.length-1].trim();return i.length-o.length}return 0},n.isCaretAtEnd=function(t){var e,n,i=!1;if(window.getSelection){var o=window.getSelection();o&&o.rangeCount&&((n=(e=o.getRangeAt(0)).cloneRange()).selectNodeContents(t),n.setEnd(e.startContainer,e.startOffset),n.selectNodeContents(t),n.setStart(e.endContainer,e.endOffset),i=""===n.toString())}return i},n.insertTextAtCursor=function(t,e){var i,o;window.getSelection&&(i=window.getSelection())&&i.getRangeAt&&i.rangeCount&&((o=i.getRangeAt(0)).deleteContents(),o.insertNode(document.createTextNode(e))),n.placeCaretAtEnd(t)},n.placeCaretAtEnd=function(t){if("undefined"!==typeof window.getSelection&&"undefined"!==typeof document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(e))}},n.state={predictableContainerId:"".concat(f(),"-").concat(f()),editorId:"".concat(f(),"-").concat(f()),mediumEditor:null,font:"Arial, serif!important",fontSize:"16.63px!important",letterSpacing:"0!important"},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;new p.a(this.editorContainer.current,{placeholder:{text:"Start writing..."},toolbar:!0,autoLink:!1,imageDragging:!1,disableExtraSpaces:!0});var e=document.getElementById(this.state.editorId);e.addEventListener("keydown",this.preventTabDefault),e.addEventListener("keyup",function(n){var i=document.getElementById(t.state.predictableContainerId);if((i.style.display="none",i&&i.firstChild&&""!==i.firstChild.firstChild.data&&n.key&&"Backspace"!==n.key&&"Enter"!==n.key&&t.isCaretAtEnd(e))&&document.getSelection().anchorNode){var o=t.getLastWordCoordinates(),a=o.top,r=o.left;i.style.top="".concat(a,"px"),i.style.left="".concat(r,"px"),i.style.display="inline"}}),e.style.cssText="\n            width: 826px;\n            min-height: 970px;\n            color: #333;\n            background-color: #fff;\n            margin-top: 100px;\n            margin-left: auto;\n            margin-right: auto;\n            overflow: hidden;\n            border-top: none;\n            padding-top: 80px;\n            padding-left: 96px!important;\n            padding-right: 96px!important;\n            border: 1px solid #80808082;\n            position: relative;\n            font-family: ".concat(this.state.font,";\n            font-size: ").concat(this.state.fontSize,";\n            letter-spacing: ").concat(this.state.letterSpacing,";\n            line-height: 1.7rem;\n            outline: none;\n        "),new w({predictableContainerId:this.state.predictableContainerId,editorId:this.state.editorId,data:{source:E},editor:e,sensitivity:3,predictableContainer:{container:function(e){e.setAttribute("id",t.state.predictableContainerId),e.style.cssText="\n                        display: none;\n                        font-family: ".concat(t.state.font,";\n                        font-size: ").concat(t.state.fontSize,";\n                        letter-spacing: ").concat(t.state.letterSpacing,";\n                        -webkit-user-modify: read-only;\n                        user-select: none;\n                        cursor: text;\n                        position: fixed;\n                        text-overflow: ellipsis;\n                        white-space: wrap;\n                        max-width: 320px;\n                        overflow: hidden;\n                        z-index: 99999;\n                        color: #757575;\n                        opacity: 0.7;\n                        overflow: hidden;\n                    ")}},suggestionText:{content:function(t,e){var n=t.match;e.textContent=n}},context:{getData:function(){return t.getLastWordCoordinates(),t.getLastWord()}},onTabPress:function(){var e=document.getSelection().anchorNode;document.createRange().selectNodeContents(e);var n=e;n=3===e.nodeType?e.data:e.textContent;var i=document.querySelector(".predictable__suggestion").firstChild.data;i=i.replace(n,""),t.insertTextAtCursor(t.editorContainer.current,i)}})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.preventTabDefault)}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{id:this.state.editorId,ref:this.editorContainer}))}}]),e}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,e,n){t.exports=n(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.67575a16.chunk.js.map